<ng-container #viewport="wtViewport" wtViewport></ng-container>
<ng-container #fullscreen="wtFullscreen" wtFullscreen></ng-container>

<ng-template
  #toolbarTemplate
  let-left="left"
  let-right="right"
  let-testName="testName"
>
  <div class="space-around-row-container">
    <div class="row-container-gap-1 row-flex-start">
      <wt-template-outlet
        [items]="left"
        [testing]="testing"
        [testName]="testName + '-left'"
      ></wt-template-outlet>
    </div>
    <div class="row-container-gap-1 row-flex-end">
      <wt-template-outlet
        [items]="right"
        [testing]="testing"
        [testName]="testName + '-right'"
      ></wt-template-outlet>
    </div>
  </div>
</ng-template>

<mat-sidenav-container>
  <!-- Sidenav Left -->
  <mat-sidenav
    #leftSidenav
    class="left"
    position="start"
    [opened]="isLeftSidenavOpen"
    [mode]="mode"
    (click)="sideNavClick(leftSidenav, viewport.isHandset)"
  >
    <wt-template-outlet
      [items]="sidenavLeft"
      [testing]="testing"
      testName="Left sidenav"
    ></wt-template-outlet>
  </mat-sidenav>

  <!-- Sidenav Right -->
  <mat-sidenav
    #rightSidenav
    class="right"
    position="end"
    [mode]="mode"
    (click)="sideNavClick(rightSidenav)"
  >
    <wt-template-outlet
      [items]="sidenavRight"
      [testing]="testing"
      testName="Right sidenav"
    ></wt-template-outlet>
  </mat-sidenav>

  <!-- --Start of the content -->
  <mat-sidenav-content>
    <!-- Main toolbar -->
    <mat-toolbar class="toolbar" color="primary">
      <img wtAppLogo *ngIf="viewport.isNotHandset" />

      <!-- Left Sidenav Toggle -->
      <button
        class="left-sidenav-toggle"
        mat-icon-button
        (click)="leftSidenav.toggle()"
        aria-label="Toggle Left Sidenav"
      >
        <mat-icon class="fill">{{
          leftSidenav.opened ? 'menu_opened' : 'menu'
        }}</mat-icon>
      </button>

      <!-- Toolbar Items -->
      <ng-container
        *ngTemplateOutlet="
          toolbarTemplate;
          context: {
            left: toolbarLeft,
            right: toolbarRight,
            testName: 'toolbar'
          }
        "
      ></ng-container>

      <!-- Right Sidenav Toggle -->
      <button
        class="right-sidenav-toggle"
        mat-icon-button
        (click)="rightSidenav.toggle()"
        aria-label="Toggle Right Sidenav"
      >
        <mat-icon class="fill">{{ rightSidenavToggleIcon }}</mat-icon>
      </button>
    </mat-toolbar>

    <!-- Main Content  -->

    <div #mainContentContainer class="main-content-container">
      <!-- Full Screen Button -->
      <button
        class="fullscreen-button"
        mat-icon-button
        (click)="fullscreen.toggle(mainContentContainer)"
        [attr.aria-label]="
          fullscreen.toggleValue('Fullscreen', 'Exit Fullscreen')
        "
      >
        <mat-icon>
          {{ fullscreen.toggleValue('fullscreen', 'fullscreen_exit') }}
        </mat-icon>
      </button>

      <wt-template-outlet
        [items]="mainContent"
        [testing]="testing"
        testName="Main Content"
      ></wt-template-outlet>
    </div>

    <!-- Statusbar -->
    <mat-toolbar class="statusbar" color="primary">
      <ng-container
        *ngTemplateOutlet="
          toolbarTemplate;
          context: {
            left: statusbarLeft,
            right: statusbarRightt,
            testName: 'statusbar'
          }
        "
      ></ng-container>
    </mat-toolbar>
    <!-- --Endof the content -->
  </mat-sidenav-content>
</mat-sidenav-container>
