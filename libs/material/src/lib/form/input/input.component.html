<!-- Text input -->
<ng-template #textInput>
  <mat-form-field [formGroup]="formGroup" [appearance]="appearance">
    <mat-label>{{ label }}</mat-label>
    <input
      type="text"
      matInput
      [formControlName]="name"
      [attr.required]="required"
      [minLength]="minlength || null"
      [maxLength]="maxlength || null"
      [autocomplete]="autocomplete"
    />
    <mat-icon matPrefix color="primary"> {{ icon }}</mat-icon>
    <mat-error>{{ getError() }}</mat-error>
  </mat-form-field>
</ng-template>

<!-- Textarea input -->
<ng-template #textareaInput>
  <mat-form-field [formGroup]="formGroup" [appearance]="appearance">
    <mat-label>{{ label }}</mat-label>
    <textarea
      type="text"
      matInput
      [formControlName]="name"
      [attr.required]="required"
      [minLength]="minlength || null"
      [maxLength]="maxlength || null"
      [autocomplete]="autocomplete"
    ></textarea>
    <mat-icon matPrefix color="primary"> {{ icon }}</mat-icon>
    <mat-error>{{ getError() }}</mat-error>
  </mat-form-field>
</ng-template>

<!-- Number input -->
<ng-template #numberInput>
  <mat-form-field [formGroup]="formGroup" [appearance]="appearance">
    <mat-label>{{ label }}</mat-label>
    <input
      type="number"
      matInput
      [min]="min || null"
      [max]="max || null"
      [attr.required]="required || null"
      [autocomplete]="autocomplete"
      [formControlName]="name"
    />
    <mat-icon matPrefix color="primary"> {{ icon }}</mat-icon>
    <mat-error>{{ getError() }}</mat-error>
  </mat-form-field>
</ng-template>

<!-- Checkbox -->
<ng-template #checkboxInput>
  <div [formGroup]="formGroup">
    <mat-checkbox [formControlName]="name">{{ label }}</mat-checkbox>
  </div>
</ng-template>

<!-- Radio Group -->
<ng-template #radioGroupInput>
  <div [formGroup]="formGroup">
    <fieldset>
      <legend>{{ label }}</legend>
      <mat-radio-group [formControlName]="name" [attr.aria-label]="label">
        @for (item of options; track $index) {
        <mat-radio-button [value]="item">{{ item }} </mat-radio-button>
        }
      </mat-radio-group>
    </fieldset>
  </div>
</ng-template>

<!-- Select Input -->
<ng-template #selectInput>
  <mat-form-field [formGroup]="formGroup" [appearance]="appearance">
    <mat-label>{{ label }}</mat-label>
    <mat-select [formControlName]="name" [multiple]="multiple">
      @for (option of options; track option) {
      <mat-option [value]="option">{{ option }}</mat-option>
      }
    </mat-select>
    <mat-icon matPrefix color="primary"> {{ icon }}</mat-icon>
  </mat-form-field>
</ng-template>

<!-- Autocomplete Input  -->
<ng-template #autocompleteInput>
  <mat-form-field [formGroup]="formGroup" [appearance]="appearance">
    <mat-label>{{ label }}</mat-label>
    <input
      type="text"
      matInput
      [attr.aria-label]="label"
      [formControlName]="name"
      [matAutocomplete]="auto"
    />

    <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
      @for (option of options ; track option) {
      <mat-option [value]="option">{{ option }}</mat-option>
      }
    </mat-autocomplete>
    <mat-icon matPrefix color="primary"> {{ icon }}</mat-icon>
    <mat-error>{{ getError() }}</mat-error>
  </mat-form-field>
</ng-template>

<!-- Switch Input -->
<ng-template #switchInput>
  <div [formGroup]="formGroup">
    <mat-slide-toggle [formControlName]="name" color="primary">
      {{ label }}
    </mat-slide-toggle>
  </div>
</ng-template>

@if (inputType =='text') {
<ng-container *ngTemplateOutlet="textInput"></ng-container>
} @else if(inputType =='textarea'){
<ng-container *ngTemplateOutlet="textareaInput"></ng-container>
} @else if(inputType =='number') {
<ng-container *ngTemplateOutlet="numberInput"></ng-container>
} @else if(inputType =='select') {
<ng-container *ngTemplateOutlet="selectInput"></ng-container>
} @else if(inputType =='autocomplete') {
<ng-container *ngTemplateOutlet="autocompleteInput"></ng-container>
} @else if(inputType =='radio'){
<ng-container *ngTemplateOutlet="radioGroupInput"></ng-container>
} @else if(inputType =='switch'){
<ng-container *ngTemplateOutlet="switchInput"></ng-container>
} @else if(inputType =='checkbox'){
<ng-container *ngTemplateOutlet="checkboxInput"></ng-container>
} @else {
<div class="error">inputType is not valid!</div>
}
